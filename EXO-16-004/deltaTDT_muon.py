#!/usr/bin/env python
import os, sys
import numpy as np

if __name__ == '__main__':

    lumi = 36.2

    deltaTDT = [-105, -100, -95, -90, -85, -80, -75, -70, -65, -60, -55, -50, -45, -40, -35, -30, -25, -20, -15, -10, -5, 0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 105]

    data = [
        0.0001685892,  
        0.000244657,   
        0.0001170824,  
        0.0001774121,  
        0.0003011713,  
        0.0005207904,  
        0.0008970757,  
        0.001747891,   
        0.004829472,   
        0.01757548,    
        0.06393989,    
        0.1793951,     
        0.3186126,     
        0.2689551,     
        0.09832613,    
        0.02648663,    
        0.008473097,   
        0.003703001,   
        0.002017109,   
        0.001264061,   
        0.0007721242,  
        0.0004800142,  
        0.0003209633,  
        0.0002277266,  
        0.0001621508,  
        0.0001065903,  
        8.703685e-05,  
        6.366805e-05,  
        4.482994e-05,  
        3.243017e-05,  
        2.265343e-05,  
        2.217651e-05,  
        1.478434e-05,  
        1.00152e-05,   
        1.00152e-05,   
        8.584457e-06,  
        5.0076e-06,    
        2.623028e-06,  
        4.769143e-06,  
        1.430743e-06,  
        1.6692e-05,    
        1.33536e-05   
        ]
    error_data = [  
        6.340449e-06,
        7.638076e-06,
        5.283857e-06,
        6.504243e-06,
        8.474459e-06,
        1.114388e-05,
        1.46258e-05,
        2.041561e-05,
        3.393556e-05,
        6.473793e-05,
        0.0001234784,
        0.0002068285,
        0.0002756364,
        0.0002532474,
        0.0001531227,
        7.947279e-05,
        4.494964e-05,
        2.971543e-05,
        2.193157e-05,
        1.736158e-05,
        1.356903e-05,
        1.069873e-05,
        8.748485e-06,
        7.369058e-06,
        6.218201e-06,
        5.04155e-06,
        4.555717e-06,
        3.896422e-06,
        3.269559e-06,
        2.780864e-06,
        2.324193e-06,
        2.299597e-06,
        1.877613e-06,
        1.545379e-06,
        1.545379e-06,
        1.430743e-06,
        1.092748e-06,
        7.908728e-07,
        1.066413e-06,
        5.840983e-07,
        1.995075e-06,
        1.78445e-06
        ]

    cosmicMC = [
        0,
        3.147128e-05,
        3.147128e-05,
        3.147128e-05,
        3.147128e-05,
        0.000220299,
        0.000220299,
        0.0007238395,
        0.003367427,
        0.01652242,
        0.0592919,
        0.1630842,
        0.3115342,
        0.2966798,
        0.1114713,
        0.02596381,
        0.006608969,
        0.001919748,
        0.0008182533,
        0.0006294256,
        0.0003147128,
        0.0002517703,
        6.294256e-05,
        9.441385e-05,
        0,
        3.147128e-05,
        3.147128e-05,
        0,
        0,
        0,
        3.147128e-05,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
        ]
    error_cosmicMC = [
        0,
        3.147128e-05,
        3.147128e-05,
        3.147128e-05,
        3.147128e-05,
        8.326519e-05,
        8.326519e-05,
        0.000150931,
        0.0003255415,
        0.0007210977,
        0.001366013,
        0.002265495,
        0.003131195,
        0.003055633,
        0.001873004,
        0.0009039438,
        0.0004560622,
        0.0002457986,
        0.0001604727,
        0.0001407439,
        9.952093e-05,
        8.901423e-05,
        4.450711e-05,
        5.450986e-05,
        0,
        3.147128e-05,
        3.147128e-05,
        0,
        0,
        0,
        3.147128e-05,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
        ]

    gluinos = [
        0,
        0.004651163,
        0,
        0,
        0,
        0,
        0.004651163,
        0,
        0,
        0.009302326,
        0.004651163,
        0.01395349,
        0.004651163,
        0.01395349,
        0.01860465,
        0.009302326,
        0.02790698,
        0.05581395,
        0.04651163,
        0.1116279,
        0.09767442,
        0.1395349,
        0.1023256,
        0.0744186,
        0.05581395,
        0.08372093,
        0.0372093,
        0.03255814,
        0.004651163,
        0.004651163,
        0.01395349,
        0.009302326,
        0.009302326,
        0,
        0.009302326,
        0,
        0,
        0,
        0,
        0,
        0,
        0
        ]
    error_gluinos = [
        0,
        0.004651163,
        0,
        0,
        0,
        0,
        0.004651163,
        0,
        0,
        0.006577737,
        0.004651163,
        0.00805605,
        0.004651163,
        0.00805605,
        0.009302326,
        0.006577737,
        0.01139298,
        0.0161121,
        0.01470827,
        0.02278595,
        0.02131431,
        0.02547547,
        0.02181589,
        0.01860465,
        0.0161121,
        0.01973321,
        0.01315547,
        0.01230582,
        0.004651163,
        0.004651163,
        0.00805605,
        0.006577737,
        0.006577737,
        0,
        0.006577737,
        0,
        0,
        0,
        0,
        0,
        0,
        0
        ]
    
    mchamps = [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0.004504505,
        0,
        0.004504505,
        0.002252252,
        0.01126126,
        0.05855856,
        0.1261261,
        0.1328829,
        0.1644144,
        0.1644144,
        0.1261261,
        0.0990991,
        0.06981982,
        0.02027027,
        0.004504505,
        0.006756757,
        0.002252252,
        0.002252252,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
        ]
    error_mchamps = [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0.003185166,
        0,
        0.003185166,
        0.002252252,
        0.005036189,
        0.01148428,
        0.01685431,
        0.01729988,
        0.01924325,
        0.01924325,
        0.01685431,
        0.01493975,
        0.01254001,
        0.006756757,
        0.003185166,
        0.003901015,
        0.002252252,
        0.002252252,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
        ]

    info  = "independent_variables:\n"
    info += "- header:\n"
    info += "    name: $\\Delta t_{\\mathrm{DT}}$\n"
    info += "    units: ns\n"
    info += "  values:\n"
    for v in range(len(deltaTDT)-1):
        high = deltaTDT[v+1]
        low = deltaTDT[v]
        info += "  - {{high: {0}, low: {1}}}\n".format(high,low)

    info += "dependent_variables:\n"

    info += "- header:\n"
    info += "    name: Fraction of Entries / 5.0 ns\n"
    info += "  qualifiers:\n"
    info += "  - {name: Sample, value: Data}\n"
    info += "  - {{name: LUMINOSITY, units: 'fb$^{{-1}}$', value: {0}}}\n".format(lumi)
    info += "  values:\n"
    for idx in range(len(deltaTDT)-1):
        v = data[idx]
        v_e = error_data[idx]
        info += "  - value: {0:.6g}\n".format(v)
        info += "    errors:\n"
        info += "    - {{symerror: {0:.6g}, label: 'stat'}}\n".format(v_e)

    info += "- header:\n"
    info += "    name: Fraction of Entries / 5.0 ns\n"
    info += "  qualifiers:\n"
    info += "  - {name: Sample, value: Cosmic ray muon simulation}\n"
    info += "  - {{name: LUMINOSITY, units: 'fb$^{{-1}}$', value: {0}}}\n".format(lumi)
    info += "  values:\n"
    for idx in range(len(deltaTDT)-1):
        v = cosmicMC[idx]
        v_e = error_cosmicMC[idx]
        info += "  - value: {0:.6g}\n".format(v)
        info += "    errors:\n"
        info += "    - {{symerror: {0:.6g}, label: 'stat'}}\n".format(v_e)

    info += "- header:\n"
    info += "    name: Fraction of Entries / 5.0 ns\n"
    info += "  qualifiers:\n"
    info += "  - {name: Sample, value: '$\\tilde{g} \\rightarrow q\\bar{q}\\tilde{\\chi}^{0}_{2}$, $\\tilde{\\chi}^{0}_{2} \\rightarrow \\mu^{+}\\mu^{-}\\tilde{\\chi}^{0}$ ($m_{\\tilde{g}}$ = 1000 GeV, $m_{\\tilde{\\chi}^{0}_{2}}$ = 625 GeV, $m_{\\tilde{\\chi}^{0}}$ = 250 GeV)'}\n"
    info += "  - {{name: LUMINOSITY, units: 'fb$^{{-1}}$', value: {0}}}\n".format(lumi)
    info += "  values:\n"
    for idx in range(len(deltaTDT)-1):
        v = gluinos[idx]
        v_e = error_gluinos[idx]
        info += "  - value: {0:.6g}\n".format(v)
        info += "    errors:\n"
        info += "    - {{symerror: {0:.6g}, label: 'stat'}}\n".format(v_e)

    info += "- header:\n"
    info += "    name: Fraction of Entries / 5.0 ns\n"
    info += "  qualifiers:\n"
    info += "  - {name: Sample, value: '$\\mathrm{MCHAMP} \\rightarrow \\mu^{\\pm}\\mu^{\\pm}$ (|Q| = 2e, $m_{\\mathrm{MCHAMP}}$ = 600 GeV)'}\n"
    info += "  - {{name: LUMINOSITY, units: 'fb$^{{-1}}$', value: {0}}}\n".format(lumi)
    info += "  values:\n"
    for idx in range(len(deltaTDT)-1):
        v = mchamps[idx]
        v_e = error_mchamps[idx]
        info += "  - value: {0:.6g}\n".format(v)
        info += "    errors:\n"
        info += "    - {{symerror: {0:.6g}, label: 'stat'}}\n".format(v_e)

    with open("deltaTDT.yaml", "w") as f:
        f.write(info)
